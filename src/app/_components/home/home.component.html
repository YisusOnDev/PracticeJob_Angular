<div class="grid-container">
  <h1 class="mat-h1">Panel de control</h1>
  <mat-grid-list cols="2" rowHeight="75vh">
    <mat-card class="dashboard-card">
      <mat-card-header>
        <mat-card-title>
          Últimas ofertas publicadas
        </mat-card-title>
      </mat-card-header>
      <mat-card-content class="dashboard-card-content">
        <div>En proceso...</div>
      </mat-card-content>
    </mat-card>
    <div class="custom-fab-button-container">
      <button mat-fab (click)="addButtonPressed()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </mat-grid-list>
</div>

<!-- Add New Offer Dialog Form -->
<ng-template #newOfferDialogForm>
  <h2 mat-dialog-title>Nueva Oferta</h2>
  <mat-divider></mat-divider>
  <br>
  <mat-dialog-content class="mat-typography">
    <form class="form" [formGroup]="newOfferForm">
      <mat-form-field class="form-full-width" appearance="fill">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="name" placeholder="Desarrollador Backend .NET Core">
        <mat-error *ngIf="newOfferForm.get('name')?.hasError('required') && newOfferForm.get('name')?.touched">El nombre
          es
          obligatorio
        </mat-error>
      </mat-form-field>
      <mat-form-field class="form-full-width" appearance="fill">
        <mat-label>Descripción</mat-label>
        <textarea matInput formControlName="description"
          placeholder="Equipo nuevo, desarrollo backend en .NET Core con EF Core 3.1"></textarea>
        <mat-error
          *ngIf="newOfferForm.get('description')?.hasError('required') && newOfferForm.get('description')?.touched">La
          descripción es
          obligatoria
        </mat-error>
      </mat-form-field>
      <mat-form-field class="form-full-width" appearance="fill">
        <mat-label>Remuneración</mat-label>
        <input matInput formControlName="remuneration" type="number" value="0" min="0" placeholder="1200 (Mínimo 0)">
        <mat-error
          *ngIf="newOfferForm.get('remuneration')?.hasError('required') && newOfferForm.get('remuneration')?.touched">La
          remuneración es
          obligatoria y mínimo debe de ser 0
        </mat-error>
      </mat-form-field>
      <mat-form-field class="form-full-width" appearance="fill">
        <mat-label>Horas</mat-label>
        <input matInput formControlName="schedule" placeholder="8 horas">
      </mat-form-field>
      <mat-form-field class="form-full-width" appearance="fill">
        <mat-label>Duración de la oferta</mat-label>
        <mat-date-range-input [rangePicker]="picker" [min]="minDate">
          <input matStartDate placeholder="Fecha inicio" formControlName="startDate">
          <input matEndDate placeholder="Fecha fin" formControlName="endDate">
        </mat-date-range-input>
        <mat-error
          *ngIf="newOfferForm.get('startDate')?.hasError('required') && newOfferForm.get('startDate')?.touched || newOfferForm.get('endDate')?.hasError('required') && newOfferForm.get('endDate')?.touched">
          Las fechas de inicio y fin son obligatorias
        </mat-error>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
      <mat-form-field class="form-full-width" appearance="fill">
        <mat-label>Ciclos</mat-label>
        <mat-select formControlName="fps" multiple>
          <mat-option *ngFor="let fp of fpList" [value]="fp">{{fp.name}}</mat-option>
        </mat-select>
        <mat-error *ngIf="newOfferForm.get('fps')?.hasError('required') && newOfferForm.get('fps')?.touched">Debes
          seleccionar una FP como mínimo
        </mat-error>
      </mat-form-field>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button matDialogClose="no">Cancelar</button>
    <button (click)="newOfferSubmit()" mat-button>Publicar</button>
  </mat-dialog-actions>
</ng-template>